package GUIe;

import java.awt.EventQueue;

import javax.swing.JDialog;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JTable;

import java.awt.Font;
import javax.swing.SwingConstants;

import pakiet.Funkcje;
import pakiet.ModelTablicyProduktow;
import pakiet.Produkt;

import javax.swing.JButton;
import java.awt.event.ActionListener;
import java.sql.SQLException;
import java.util.List;
import java.awt.event.ActionEvent;

public class ZatwierdzenieOUsuwaniuOkienko extends JDialog {

Funkcje funkcje;


	/**
	 * Create the dialog.
	 * @param tempprodukt 
	 * @param table 
	 */
	public ZatwierdzenieOUsuwaniuOkienko(Produkt tempprodukt, JTable table) {
		
		try
		{
		funkcje= new Funkcje();
		}
		catch(Exception exc)
		{
			JOptionPane.showMessageDialog(null,"B³¹d przy inicjalizacji okna " + exc);
		}
		
		setBounds(100, 100, 450, 300);
		getContentPane().setLayout(null);
		
		JLabel JLabeltekst = new JLabel("Czy aby napewno chcesz usun\u0105\u0107 ten obiekt?");
		JLabeltekst.setHorizontalAlignment(SwingConstants.CENTER);
		JLabeltekst.setFont(new Font("Tahoma", Font.PLAIN, 18));
		JLabeltekst.setBounds(21, 30, 384, 75);
		getContentPane().add(JLabeltekst);
		
		JButton btnTak = new JButton("Tak");
		btnTak.addActionListener(new ActionListener() {
			public void actionPerformed(ActionEvent e) {
				
				try {
					funkcje.wyzeruj(tempprodukt);
				} catch (SQLException exc) {
					JOptionPane.showMessageDialog(null,"B³¹d przy usuwaniu produktu " + exc);
				}


				try{
					List<Produkt> produkty = funkcje.getAllProdukty();
					
					ModelTablicyProduktow model = new ModelTablicyProduktow(produkty);
					
					table.setModel(model);
				}
				catch(Exception exc){
					JOptionPane.showMessageDialog(null,"Blad przy odswiezaniu " + exc);
				}
			}
			
		});
		btnTak.setBounds(89, 169, 89, 23);
		getContentPane().add(btnTak);
		
		JButton btnNie = new JButton("Nie");
		btnNie.addActionListener(new ActionListener() {
			public void actionPerformed(ActionEvent e) {
				dispose();
				setVisible(false);
			}
		});
		btnNie.setBounds(255, 169, 89, 23);
		getContentPane().add(btnNie);

	}
}
